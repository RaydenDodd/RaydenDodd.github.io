<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Project</title>
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>

<header class="nav">
  <div class="nav-left">
    <a class="brand" href="../index.html">Rayden Dodd</a>
  </div>
  <nav class="nav-right">
    <a class="active" href="./index.html">Projects</a>
    <a href="../games.html">Games</a>
    <a href="../index.html#contact">Contact</a>
  </nav>
</header>

<main class="page">

  <a class="muted" href="./index.html" style="display:inline-block;margin-bottom:18px;">
    ← Back to Projects
  </a>

  <section class="teaser">
    <div class="teaser-inner">
      <h1 id="title"></h1>
      <p id="desc" class="muted"></p>
      <div id="tags" class="tag-row"></div>
      <div id="links" class="card-actions"></div>
    </div>
  </section>

  <div id="sections"></div>

</main>

<footer class="footer">
  <span>© <span id="year"></span> Rayden Dodd</span>
</footer>

<script src="./projects.js"></script>
<script>
document.getElementById("year").textContent = new Date().getFullYear();

const id = new URLSearchParams(location.search).get("id");
const proj = (window.PROJECTS || []).find(p => p.id === id);

const titleEl = document.getElementById("title");
const descEl = document.getElementById("desc");
const tagsEl = document.getElementById("tags");
const linksEl = document.getElementById("links");
const sectionsEl = document.getElementById("sections");

if (!proj) {
  titleEl.textContent = "Project not found";
  return;
}

document.title = proj.title;
titleEl.textContent = proj.title;
descEl.textContent = proj.desc || "";

tagsEl.innerHTML = (proj.tags || []).map(t => `<span class="tag">${t}</span>`).join("");

const btn = (l,h) => `<a class="btn small" href="${h}" target="_blank">${l}</a>`;
linksEl.innerHTML = [
  proj.repo ? btn("Repo", proj.repo) : "",
  proj.live ? btn("Live Site", proj.live) : ""
].join("");

const blocks = [];

(proj.sections || []).forEach(s => {
  blocks.push(`
    <section class="teaser">
      <div class="teaser-inner">
        <h2>${s.heading}</h2>
        <p class="muted">${s.body}</p>
      </div>
    </section>
  `);
});

(proj.pdfs || []).forEach(p => {
  blocks.push(`
    <section class="teaser">
      <div class="teaser-inner">
        <h2>${p.label}</h2>
        <div style="height:80vh;">
          <embed src="${p.url}" type="application/pdf" width="100%" height="100%">
        </div>
        <div style="margin-top:12px;display:flex;justify-content:flex-end;">
          <a class="btn small" href="${p.open}" target="_blank">Open</a>
        </div>
      </div>
    </section>
  `);
});

(proj.youtube || []).forEach(v => {
  blocks.push(`
    <section class="teaser">
      <div class="teaser-inner">
        <h2>${v.label}</h2>
        <iframe width="100%" height="480"
          src="https://www.youtube-nocookie.com/embed/${v.id}"
          allowfullscreen loading="lazy"></iframe>
      </div>
    </section>
  `);
});

sectionsEl.innerHTML = blocks.join("");
</script>

</body>
</html>
